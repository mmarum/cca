{% extends "base-site.html" %}
{% block title %}Events list{% endblock %}

{% block html_head %}
<style>
/* specific css */
</style>
{% endblock %}

{% block content %}

{% for event in events %}
  <div class="row">
    <div class="col">
      <a href="/app/book/event?eid={{ event.eid }}" class="event_link">
        <img alt="{{ event.image }}" src="/img/small/{{ event.image }}" class="event_image"/>
      </a>
    </div>
    <div class="col">
      <span class="date">{{ event.edatetime.strftime('%a %b %d at %I:%M %p')|replace(' 0', ' ') }}</span>
      {{ event.duration }} hrs
      <a href="/app/book/event?eid={{ event.eid }}" class="event_link">
        <h1>{{ event.title }}</h1>
      </a>
      ${{ event.price }} per person,
      <div><span id="seats_remaining_{{ event.eid }}">{{ event.elimit }}</span> seats remaining.</div>
      <div>At: {{ event.location }}</div>
      <div>Book Now</div>
      <div>{{ event.description }}</div>
    </div>
  </div>
{% endfor %}

<script>
var orders_count = {{ orders_count }};
for (var key in orders_count) {
  if (orders_count.hasOwnProperty(key)) {
    sr = document.getElementById("seats_remaining_"+key);
    new_value = sr.innerHTML-orders_count[key];
    console.log(key + " -> " + orders_count[key] + " old-val: " + sr.innerHTML + " new-val: " + new_value);
    sr.innerHTML = new_value;
  }
}
</script>
{% endblock %}
