<!doctype html>
<html lang="en">

<head>

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

<meta property="og:site_name" content="Catalyst Creative Arts"/>
<meta property="og:title" content="Catalyst Creative Arts"/>

<meta property="og:description" content="Arlington art craft and DIY studio and event venue"/>
<meta name="description" content="Arlington art craft and DIY studio and event venue"/>

<meta property="og:image" content="https://www.catalystcreativearts.com/img/logo.png"/>
<meta property="og:url" content="https://www.catalystcreativearts.com/"/>

<meta name="keywords" content="Parties, birthday, girls night out, date night, parents night out, corporate event, team building, fundraiser, lessons, bachelorette, shower, office party, christmas party, holiday party, summer art camp, workshops, after school art,  DIY, mommy and me, art show, walk-in, art market, byob, crafts, mobile events, gift certificates, mother's day, art studio, event venue, art gallery, art school, DIY bar"/>

<link rel="stylesheet" 
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" 
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" 
    crossorigin="anonymous">

<title>Catalyst Creative Arts Cart</title>

<script>
//if (location.protocol !== 'https:') {
//  location.replace(`https:${location.href.substring(location.protocol.length)}`);
//}
</script>


<style>
.product_price, .product_total {
  /*
  padding-left: 40px;
  padding-right: 40px;
  */
}
form, input {
  display: inline;
}
.product_image {
  max-width: 100%;
}
#cart {
  width: 50px;
}
#add_to_cart {
  margin: 10px;
  padding: 10px;
  width: 220px;
  border: 1px dashed LightGray;
  border-radius: 15px;
  background-color: HoneyDew;
}
#add_to_cart a {
  text-decoration: none;
}
#product_quantity_select {
  margin-top: 10px;
  max-width: 60px;
}
img.check {
  width: 35px;
  padding-left: 10px;
}
.form-control {
  display: inline;
}
.plus_minus {
  font-size: 20px;
}
#add_to_cart_text {
  margin-left: 3px;
  padding-left: 3px;
}
.top-buffer {
  padding: 10px 0 10px 0;
  margin: 10px 0 10px 0;
  /* border-bottom: 1px dashed LightGray; */
}
</style>


<script>
var browser_size = {
  width: window.innerWidth || document.body.clientWidth,
  height: window.innerHeight || document.body.clientHeight
}
</script>

<style>
.top-buffer { 
  padding: 10px 0 10px 0;
  margin: 10px 0 10px 0;
  border-top: 1px dashed LightGray;
}
.top-buffer-no-line { 
  padding: 10px 0 10px 0;
  margin: 10px 0 10px 0;
}
table {
  width: 100%;
}
td {
  border-bottom: 1px solid LightGray;
  border-right: 1px solid LightGray;
  padding: 5px;
  padding: 5px;
}
@media only screen and (max-width: 600px) {
  #nav_container {
    display: none;
  }
  .top-buffer {
    padding: 15px 0 15px 0;
    margin: 15px 0 15px 0;
    border-bottom: 3px dashed Gray;
  }
  .event_image {
    width: 100%;
    padding: 5px;
  }
  h1 {
    font-size: 1.0rem;
    padding: 10px;
  }
  h4 {
    font-size: 1rem;
    margin-top: 10px;
  }
  .logo {
    padding: 10px 0 10px 0;
  }
  h3 {
    font-size: 1.25rem;
  }
  img {
    width: 100%;
  }
}
#tagline {
  font-size: 20px;
}
@media only screen and (min-width: 601px) {
  div#burger div {
    display: none;
  }
  #tagline {
    font-size: 30px;
  }
}
.logo {
  width: 100%;
  max-width: 915px;
}
div#burger div {
  margin-top: 10px;
  width: 35px;
  height: 5px;
  background-color: black;
  margin: 6px 0;
  
}
#buns {
  
}
#top_right_cart_container {
  display: none;
  width: 50px;
  position: absolute;
  top: 20px;
  right: 20px;
}
.cart_icon {
  width: 50px;
}
#top_right_cart_total {
  margin-left: 22px;
}
</style>

</head>

<body>

<!--
0) Home & After School
1) After School Pottery Course
2) After School Art Club
3) Home School Art Club
4) # Summer Camp
-->

<div id="top"></div>

<div id="content">

<div id="top_right_cart_container">
  <a href="/cart">
  <img src="/img/cart.png" class="cart_icon"/>
  <div id="top_right_cart_total"></div>
  </a>
</div>

<div class="container">

<div class="row d-flex h-100">
  <div class="col-2 justify-content-center align-self-center" id="burger" onclick="navbardrop('nav_container'); return false;">
    <div id="buns">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  <div class="col-10" id="logo_container">
    <center>
    <a href="/"><img src="/img/logo.png" class="logo"/></a>
    </center>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <center>
    <div id="tagline">Art, Craft and DIY Studio and Event Venue, Arlington Texas</div>
    </center>
  </div>
</div>

<script>
if (browser_size["width"] > 600) {
  document.getElementById("logo_container").setAttribute("class", "col-12");
}
</script>

<div class="row navbar_row">
  <div class="col">

<div id="nav_container">

<nav class="navbar navbar-expand-sm bg-light navbar-light d-flex">
  <ul class="navbar-nav list-inline mx-auto justify-content-center">
  
    <li class="nav-item"><a class="nav-link" href="/calendar.html">Calendar</a></li>
  
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbardrop" onclick="navbardrop('dropdown-menu'); return false;" data-toggle="dropdown">Crafts & Services</a>
      <div class="dropdown-menu"  id="dropdown-menu">
      <a class="dropdown-item" href="/acrylic-painting.html">Acrylic Painting</a><a class="dropdown-item" href="/watercolor-painting.html">Watercolor Painting</a><a class="dropdown-item" href="/paint-your-pet.html">Paint Your Pet</a><a class="dropdown-item" href="/artist-guided-family-painting.html">Artist Guided Family Painting</a><a class="dropdown-item" href="/alcohol-ink.html">Alcohol Ink</a><a class="dropdown-item" href="/fluid-art.html">Fluid Art</a><a class="dropdown-item" href="/handbuilt-pottery.html">Handbuilt Pottery</a><a class="dropdown-item" href="/fused-glass.html">Fused Glass</a><a class="dropdown-item" href="/leathercraft.html">Leathercraft</a><a class="dropdown-item" href="/resin-crafts.html">Resin Crafts</a><a class="dropdown-item" href="/water-marbling.html">Water Marbling</a><a class="dropdown-item" href="/pottery-painting.html">Pottery Painting</a><a class="dropdown-item" href="/string-art.html">String Art</a><a class="dropdown-item" href="/pottery-lessons.html">Pottery Lessons</a>
      </div>
    </li>
  
    <li class="nav-item"><a class="nav-link" href="/private-events.html">Private Events</a></li>
  
    <li class="nav-item"><a class="nav-link" href="/about-us.html">About Us</a></li>
  
    <li class="nav-item"><a class="nav-link" href="/after-school.html">After School</a></li>
  
    <li class="nav-item"><a class="nav-link" href="/summer-camp.html">Summer Camp</a></li>
  
    <li class="nav-item"><a class="nav-link" href="/wheel-wars.html">Wheel Wars</a></li>
  
    <li class="nav-item"><a class="nav-link" href="/3-wednesdays-workshop.html">3 Wednesdays Workshop</a></li>
  
  </ul>
</nav>

</div>

  </div><!-- close col -->
</div><!-- close row -->



<div class="row">

<div class="col-sm-1">
</div>

<div class="col-md-3 text-center">
  <h2>Shopping Cart</h2>
</div>

<div class="col-md-4 text-center">
  <a href="/app/products">More shopping</a>
</div>

<div class="col-md-3 text-center">
  (x items) Subtotal: $<span id="subtotal_value">0</span>
  <button type="button" class="btn btn-info">Proceed to Checkout</button>
</div>

<div class="col-sm-1">
</div>

</div>

<!-- -->

<div class="row">

<div class="col-sm-1">
</div>

<div class="col-md-10">
  <div id="cart_contents">
  </div>
</div>

<div class="col-sm-1">
</div>

</div>

<script>
function make_request_get_list(session_id) {
  fetch('/cart-api/list', {
    method: 'POST',
    headers: {
      'content-type': 'application/json'
    },
    body: JSON.stringify({
      session_id: session_id
    })
  })
  .then(response=>response.json())
  .then(data=>{
    console.log(data); 

    var arrLen = data.length;
    var product_total_sum = 0;
    var lines = '';
    for (var i = 0; i < arrLen; i++) {
      //console.log(data[i]);
      obj = data[i];
      //console.log(obj.name);
      product_image = '<img src="/img/small/' + obj.image_path_array.split(',')[1] + '" class="product_image"/>';
      product_name = obj.name.toLowerCase().replace(/ /g, '-');
      product_desc = obj.description;
      product_total = obj.price * obj.quantity;
      //line = product_image + ' ' + obj.name + ' price: $' + obj.price + ' quantity: ' + obj.quantity + ' $' + product_total;

      var line = `
<div class="row top-buffer">
<div class="col-sm-1"></div>
<div class="col-md-2">
<a href="">${product_image}</a>
</div>
<div class="col-lg-8">
<a href="/app/products/${product_name}/${obj.pid}"><h3>${obj.name}</h3></a>
<div class="product_price">$${obj.price}</div>
<div>

<form action="" id="product_quantity_form">
<select name="quantity" id="product_quantity_select" class="form-control" onclick="updateQuantity(${obj.pid}, this.options[this.selectedIndex].value);">
<option value=${obj.quantity}>${obj.quantity}</option>
<option value=0>0</option>
<option value=1>1</option>
<option value=2>2</option>
<option value=3>3</option>
<option value=4>4</option>
<option value=5>5</option>
<option value=6>6</option>
<option value=7>7</option>
<option value=8>8</option>
<option value=9>9</option>
<option value=10>10</option>
</select>
</form>

</div>

<div>
${product_desc}
</div>

</div>
<div class="col-sm-1"></div>
</div>
`;

      lines += line;
      product_total_sum += product_total;
    }
    document.getElementById("subtotal_value").innerHTML = product_total_sum;
    document.getElementById("cart_contents").innerHTML = lines;
    //document.getElementById("cart_sum_bottom").innerHTML += product_total_sum;
  })
}

function getCartList() {
  // FIRST CHECK IF USER HAS SESSION COOKIE
  var session_id = document.cookie.split("=")[1];
  if (session_id) {
    console.log(session_id)
    // MAKE A REQUEST TO THE NEW CART API
    console.log("request to cart api for list");
    make_request_get_list(session_id);
  } else {
    console.log("No session_id");
  }
}

getCartList();

function plusMinus(n) {
  v = document.getElementById("product_quantity_select").value;
  x = (Number(v) + Number(n));
  document.getElementById("product_quantity_select").value = x;
  return false;
}

function make_request(session_id, product_id, quantity) {
  const fetchPromise = fetch('/cart-api/update', {
    method: 'POST',
    headers: {
      'content-type': 'application/json'
    },
    body: JSON.stringify({
      session_id: session_id,
      product_id: product_id,
      quantity: quantity
    })
  });
  fetchPromise.then(response => {
    make_request_get_total(session_id);
    console.log("response from promise");
    //console.log(response);
  });
}

function updateQuantity(pid, quantity) {
  console.log(pid);
  console.log(quantity);
  // GRAB THE QUANTITY FROM FORM
  //quantity = document.getElementById("product_quantity_select").value;
  //console.log(quantity);
  if (quantity == 0) {
    // REMOVE ITEM FROM CART LIST
  } else {
    var session_id = document.cookie.split("=")[1];
    if (session_id) {
      console.log(session_id)
      // MAKE A REQUEST TO CART API
      console.log("request to cart api to update quantity");
      make_request(session_id, pid, quantity);
    } else {
      console.log("Error. Still no session_id");
    }
  }
  return false;
}

</script>




</div><!-- close container -->

<div id="footer" class="text-center bg-light top-buffer">

<div>400 E. Division St. Ste 100 Arlington, TX 76011 | (972) 446-0444</div>
<a href="/about-us.html" alt="Contact Us">Contact Us</a> | 
<a href="mailto:INFO@CATALYSTCREATIVEARTS.COM">info@catalystcreativearts.com</a> |
<a href="https://www.facebook.com/catalystcreativeart/" alt="Facebook">Facebook</a> | 
<a href="https://www.twitter.com/PWI_Carrollton" alt="Twitter">Twitter</a> | 
<a href="https://www.instagram.com/catalystcreativearts/" alt="Instagram">Instagram</a>

</div>

</div><!-- close content -->

<script>
function navbardrop(div_id_name) {
  var navbardrop_state = document.getElementById(div_id_name).style.display;
  if (navbardrop_state == "block") {
    navbardrop_state = "none";
  } else {
    navbardrop_state = "block";
  }
  document.getElementById(div_id_name).style.display = navbardrop_state;
}
</script>

<script>

function make_request_get_total(session_id) {
  fetch('/cart-api/total', {
    method: 'POST',
    headers: {
      'content-type': 'application/json'
    },
    body: JSON.stringify({
      session_id: session_id
    })
  })
  .then(response=>response.json())
  .then(data=>{
    console.log(data); 
    document.getElementById("top_right_cart_container").style.display = "block";
    document.getElementById("top_right_cart_total").innerHTML = data;
  })
}

function checkCartTotal() {
  // FIRST CHECK IF USER HAS SESSION COOKIE
  var session_id = document.cookie.split("=")[1];
  if (session_id) {
    console.log(session_id)
    // MAKE A REQUEST TO THE NEW CART API
    console.log("request to cart api for total");
    make_request_get_total(session_id);
  } else {
    console.log("No session_id");
  }
}

checkCartTotal();
</script>

</body>

</html>